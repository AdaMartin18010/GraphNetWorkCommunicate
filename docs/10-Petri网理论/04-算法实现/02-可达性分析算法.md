# å¯è¾¾æ€§åˆ†æç®—æ³• / Reachability Analysis Algorithm

## ğŸ“š **æ¦‚è¿° / Overview**

æœ¬æ–‡æ¡£æè¿°Petriç½‘å¯è¾¾æ€§åˆ†æç®—æ³•çš„å®ç°ã€‚å¯è¾¾æ€§åˆ†ææ˜¯Petriç½‘åˆ†æçš„æ ¸å¿ƒé—®é¢˜ä¹‹ä¸€ï¼Œç”¨äºæ£€æŸ¥æŸä¸ªæ ‡è¯†æ˜¯å¦å¯ä»¥ä»åˆå§‹æ ‡è¯†åˆ°è¾¾ã€‚å¯è¾¾æ€§åˆ†æåœ¨ `PetriNet` ç±»çš„ `reachability_analysis` æ–¹æ³•ä¸­å·²å®ç°ã€‚

---

## ğŸ“‘ **ç›®å½• / Table of Contents**

- [å¯è¾¾æ€§åˆ†æç®—æ³• / Reachability Analysis Algorithm](#å¯è¾¾æ€§åˆ†æç®—æ³•--reachability-analysis-algorithm)
  - [ğŸ“š **æ¦‚è¿° / Overview**](#-æ¦‚è¿°--overview)
  - [ğŸ“‘ **ç›®å½• / Table of Contents**](#-ç›®å½•--table-of-contents)
  - [ğŸ”§ **åŠŸèƒ½ç‰¹æ€§ / Features**](#-åŠŸèƒ½ç‰¹æ€§--features)
  - [ğŸ’» **ç®—æ³•å®ç° / Implementation**](#-ç®—æ³•å®ç°--implementation)

---

## ğŸ”§ **åŠŸèƒ½ç‰¹æ€§ / Features**

- çŠ¶æ€ç©ºé—´æšä¸¾
- å¹¿åº¦ä¼˜å…ˆæœç´¢
- å¯è¾¾å›¾æ„å»º
- å¯è¾¾æ€§åˆ¤å®š
- æ­»é”æ£€æµ‹

---

## ğŸ’» **ç®—æ³•å®ç° / Implementation**

å¯è¾¾æ€§åˆ†æç®—æ³•å·²åœ¨ `PetriNet` ç±»çš„ `reachability_analysis` æ–¹æ³•ä¸­å®ç°ã€‚è¯¥æ–¹æ³•ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰éå†æ‰€æœ‰å¯è¾¾æ ‡è¯†ã€‚

### æ ¸å¿ƒç®—æ³•

```python
def reachability_analysis(self, max_depth: int = 100) -> Set[Tuple]:
    """
    è¿›è¡Œå¯è¾¾æ€§åˆ†æã€‚

    Args:
        max_depth: æœ€å¤§æœç´¢æ·±åº¦

    Returns:
        å¯è¾¾æ ‡è¯†é›†
    """
    initial_marking_tuple = tuple(sorted(self.marking.items()))
    self.reachability_set = {initial_marking_tuple}
    queue = [(initial_marking_tuple, 0)]

    while queue:
        marking_tuple, depth = queue.pop(0)
        if depth >= max_depth:
            continue

        # æ¢å¤æ ‡è¯†
        self.marking = dict(marking_tuple)

        # å°è¯•è§¦å‘æ‰€æœ‰å˜è¿
        for transition in self.transitions:
            if self.is_enabled(transition):
                old_marking = dict(self.marking)
                self.fire(transition)
                new_marking_tuple = tuple(sorted(self.marking.items()))

                # è®°å½•å¯è¾¾æ€§å›¾
                self.reachability_graph[marking_tuple].append((transition, new_marking_tuple))

                # å¦‚æœæ–°æ ‡è¯†æœªè®¿é—®è¿‡ï¼ŒåŠ å…¥é˜Ÿåˆ—
                if new_marking_tuple not in self.reachability_set:
                    self.reachability_set.add(new_marking_tuple)
                    queue.append((new_marking_tuple, depth + 1))

                # æ¢å¤æ ‡è¯†
                self.marking = old_marking

    # æ¢å¤åˆå§‹æ ‡è¯†
    self.marking = dict(initial_marking_tuple)
    return self.reachability_set
```

---

## ğŸ“Š **ç®—æ³•åˆ†æ / Algorithm Analysis**

### æ—¶é—´å¤æ‚åº¦

- **å¯è¾¾æ€§åˆ†æ**: $O(|R| \cdot |T| \cdot (|P| + |T|))$
  - å…¶ä¸­ $|R|$ æ˜¯å¯è¾¾æ ‡è¯†æ•°
  - $|T|$ æ˜¯å˜è¿æ•°
  - $|P|$ æ˜¯åº“æ‰€æ•°

### ç©ºé—´å¤æ‚åº¦

- $O(|R| \cdot |P| + |R| \cdot |T|)$ - ç”¨äºå­˜å‚¨å¯è¾¾é›†å’Œå¯è¾¾æ€§å›¾

### å¤æ‚åº¦è¯´æ˜

å¯è¾¾æ€§é—®é¢˜æ˜¯ **PSPACE-complete** çš„ï¼Œè¿™æ„å‘³ç€å¯¹äºå¤§è§„æ¨¡Petriç½‘ï¼Œå®Œæ•´çš„çŠ¶æ€ç©ºé—´æœç´¢å¯èƒ½éå¸¸è€—æ—¶ã€‚å®é™…åº”ç”¨ä¸­é€šå¸¸ä½¿ç”¨ï¼š

- çŠ¶æ€ç©ºé—´çº¦ç®€æŠ€æœ¯
- ç¬¦å·çŠ¶æ€è¡¨ç¤º
- å¯å‘å¼æœç´¢æ–¹æ³•

---

## ğŸ”— **ç›¸å…³é“¾æ¥ / Related Links**

- [Petriç½‘ç†è®ºä¸»ç›®å½•](../../README.md)
- [ç®—æ³•å®ç°ç›®å½•](../README.md)
- [å¯è¾¾æ€§åˆ†æ](../../03-åˆ†ææ–¹æ³•/01-å¯è¾¾æ€§åˆ†æ.md)
- [Petriç½‘æ¨¡æ‹Ÿå™¨](01-Petriç½‘æ¨¡æ‹Ÿå™¨.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¶é—´**: 2025å¹´1æœˆ
**çŠ¶æ€**: âœ… **å·²å®Œæˆ**
