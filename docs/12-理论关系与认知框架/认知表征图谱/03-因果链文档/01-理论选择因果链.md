# 理论选择因果链 / Theory Selection Causal Chain

## 📚 **概述 / Overview**

本文档提供理论选择的因果链分析，从问题需求到理论选择的推理路径。

---

## ⚡ **问题 → 理论选择因果链 / Problem → Theory Selection Causal Chain**

```mermaid
graph TD
    Problem[系统问题] --> NeedFormal{需要形式化验证?}
    NeedFormal -->|是| PN[Petri网]
    NeedFormal -->|否| CheckScale{规模>1e5且流式?}

    CheckScale -->|是| DG[动态图论]
    CheckScale -->|否| CheckData{数据形态?}

    CheckData -->|事件日志/并发| PN
    CheckData -->|时序边/调用链| DG
    CheckData -->|点云/高维分布| TM[拓扑模型]

    CheckData --> CheckShape{关心形状/循环?}
    CheckShape -->|是| TM
    CheckShape -->|否| CheckOutput{输出需求?}

    CheckOutput -->|可证明| PN
    CheckOutput -->|可观察| DG
    CheckOutput -->|可视化形状| TM

    PN --> PNResult[Petri网分析结果]
    DG --> DGResult[动态图分析结果]
    TM --> TMResult[拓扑分析结果]
```

---

## 🔄 **需求 → 模型选择因果链 / Requirement → Model Selection Causal Chain**

```mermaid
graph LR
    Req[需求] --> Safety{安全关键?}
    Safety -->|是| Formal[形式化模型]
    Safety -->|否| Scale{大规模?}

    Scale -->|是| Stream[流式模型]
    Scale -->|否| Static{静态分析?}

    Static -->|是| StaticModel[静态模型]
    Static -->|否| Dynamic[动态模型]

    Formal --> PN[Petri网]
    Stream --> DG[动态图]
    StaticModel --> Graph[静态图]
    Dynamic --> TempNet[时序网络]

    PN --> PNModel[Petri网模型]
    DG --> DGModel[动态图模型]
    Graph --> GraphModel[图模型]
    TempNet --> TempModel[时序网络模型]
```

---

## 🎯 **约束 → 工具选择因果链 / Constraint → Tool Selection Causal Chain**

```mermaid
graph TD
    Constraint[约束条件] --> Time{实时性要求?}
    Time -->|严格| RealTime[实时工具]
    Time -->|宽松| Batch[批处理工具]

    RealTime --> Flink[Apache Flink]
    RealTime --> Kafka[Apache Kafka]
    Batch --> CPN[CPN Tools]
    Batch --> TLA[TLA+]

    Constraint --> Scale{规模要求?}
    Scale -->|大规模| Dist[分布式工具]
    Scale -->|中小规模| Local[本地工具]

    Dist --> Neo4j[Neo4j]
    Dist --> Flink
    Local --> NetworkX[NetworkX]
    Local --> GUDHI[GUDHI]

    Constraint --> Accuracy{精度要求?}
    Accuracy -->|精确| Exact[精确算法]
    Accuracy -->|近似| Approx[近似算法]

    Exact --> ModelCheck[模型检验]
    Exact --> Invariant[不变量分析]
    Approx --> Sampling[采样算法]
    Approx --> Sketch[Sketch算法]
```

---

## 📋 **因果链说明 / Causal Chain Description**

### 问题诊断链

1. **问题识别**: 系统出现异常（死锁、性能瓶颈、架构腐化）
2. **需求分析**: 确定分析目标（形式化验证、实时监控、形状分析）
3. **约束识别**: 确定约束条件（规模、实时性、精度）
4. **理论选择**: 根据需求和约束选择理论框架
5. **工具选择**: 根据理论选择相应的工具链

### 决策路径

- **路径1**: 安全关键系统 → 形式化验证 → Petri网 → CPN Tools/TLA+
- **路径2**: 大规模流式系统 → 实时监控 → 动态图 → Flink/Neo4j
- **路径3**: 高维数据分析 → 形状分析 → 拓扑模型 → GUDHI/Ripser

---

## 📚 **参考文档 / Reference Documents**

- [模型选择认知路径](../../决策逻辑图谱/01-模型选择认知路径.md)
- [算法选择认知路径](../../决策逻辑图谱/02-算法选择认知路径.md)
- [应用模式归纳概述](../../../13-应用模式归纳/00-应用模式归纳概述.md)

---

**文档版本**: v1.0
**创建时间**: 2025年1月
**最后更新**: 2025年1月
**维护者**: GraphNetWorkCommunicate项目组
**状态**: ✅ 完成
