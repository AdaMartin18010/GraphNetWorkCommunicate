# 模型选择认知路径 / Model Selection Cognitive Path

## 📚 概述 / Overview

面向三大理论（Petri网、动态图论、拓扑模型）的模型选择流程，提供可操作的判断步骤、简版决策树与输出物。

---

## 🎯 判断流程（简版）

1) **目标**：需要形式化安全/活性证明吗？
   - 是 → Petri网/形式化验证优先
   - 否 → 进入规模/数据形态判断
2) **规模与实时性**：节点/事件量 > 1e5 且流式？
   - 是 → 动态图 + 增量/近似算法
   - 否 → 继续
3) **数据形态**：
   - 事件日志/并发语义 → Petri网
   - 时序边/调用链/依赖拓扑 → 动态图
   - 点云/高维分布/形状 → 拓扑模型(TDA)
4) **关心结构洞/循环形状**：
   - 是 → 拓扑模型（持久同调、Hodge）
   - 否 → 留在Petri/动态图
5) **输出需求**：可证明 vs 可观察 vs 可视化
   - 可证明 → Petri网+模型检验
   - 可观察 → 动态图监控/谱漂移
   - 可视化形状 → Mapper/持久图

---

## 🔀 决策树（文字版）

```text
是否需形式化验证？
├─ 是 → Petri网（可达/活性/有界性，CPN/TLA+/Promela）
└─ 否
   ├─ 规模>1e5 & 流式？ → 动态图（增量算法+流处理）
   └─ 数据形态：
       ├─ 并发事件/工作流 → Petri网
       ├─ 调用链/依赖/副本拓扑 → 动态图
       └─ 高维分布/形状 → 拓扑模型(TDA)
形状或循环洞关心？ → 拓扑模型（持久同调/Hodge）
输出需要可证明/可观察/可视化 → 对应选择上方工具链
```

---

## 🧭 决策树（Mermaid）

```mermaid
flowchart TD
    A[需要形式化安全/活性证明?] -->|是| P[Petri网\nCPN/TLA+/Promela\n可达/活性/有界性]
    A -->|否| B[规模>1e5且流式?]
    B -->|是| G[动态图\n增量/近似算法\n流式监控]
    B -->|否| C[数据形态?]
    C -->|事件日志/并发| P
    C -->|调用链/依赖/副本拓扑| G
    C -->|点云/高维/形状| T[拓扑模型(TDA)\n持久同调/Mapper/Hodge]
    G --> D[关注结构洞/循环?]
    P --> D
    D -->|是| T
    D -->|否| R[维持当前选择]
    T --> O[输出需求? 可视化/形状 → 持久图/Mapper]
    G --> O2[输出需求? 可观察 → 谱/社区演化]
    P --> O3[输出需求? 可证明 → 模型检验/证明树]
```

---

## 📦 输出物

- 选择说明：记录判定分支与理由
- 候选模型与权衡表：Petri/动态图/拓扑
- 推荐工具链：验证（CPN/TLA+/Spin）、流处理（Flink/Neo4j）、TDA（GUDHI/Ripser）
- 后续动作：若Petri → 建模+不变量/可达；若动态图 → 数据接入+增量指标；若TDA → 过滤+持久图

---

## ✅ 已完成

- ✅ Mermaid版决策树（已完成，见上方）
- ✅ 典型场景示例（已完成，见下方）

---

## 🧪 典型场景示例

### 场景1：死锁预防（操作系统/工作流）

**问题**: 操作系统中的资源分配可能导致死锁，需要形式化验证系统不会进入死锁状态。

**建模选择**: **Petri网**（形式化安全性）

**分析方法**:

- 可达性分析：检查是否存在死锁状态
- 活性分析：验证所有变迁都是活的
- S-不变量：验证资源守恒性

**工具链**: CPN Tools、TLA+、Spin

**补充分析**: 动态图监测锁依赖关系

**详细示例**: 参见 [`典型场景详细示例补充.md`](../01-理论逻辑脉络/典型场景详细示例补充.md#1-死锁预防场景操作系统工作流--deadlock-prevention-scenario)

**相关文档**:
- [Petri网理论逻辑脉络](../01-理论逻辑脉络/01-Petri网理论逻辑脉络.md) - 深入了解Petri网理论
- [应用领域关系图](../认知表征图谱/02-关系图文档/03-应用领域关系图.md#一操作系统应用关系图--part-1-operating-system-application-relationship) - 操作系统应用场景
- [理论选择因果链](../认知表征图谱/03-因果链文档/01-理论选择因果链.md) - 理论选择的因果推理

### 场景2：副本拓扑监控（分布式系统）

**问题**: 大规模分布式系统的副本拓扑需要实时监控，分析故障传播和系统韧性。

**建模选择**: **动态图论**（大规模/流式）

**分析方法**:

- 时间尊重路径：追踪数据同步路径
- 谱漂移检测：检测拓扑结构变化
- 社区演化：分析副本分组变化
- 增量算法：动态最短路、PageRank、社区检测

**工具链**: Flink/Kafka、NetworkX/PyG、Neo4j

**补充分析**: Petri网验证关键安全属性

**详细示例**: 参见 [`典型场景详细示例补充.md`](../01-理论逻辑脉络/典型场景详细示例补充.md#2-副本拓扑监控场景分布式系统--replica-topology-monitoring-scenario)

**相关文档**:
- [动态图论逻辑脉络](../01-理论逻辑脉络/02-动态图论逻辑脉络.md) - 深入了解动态图论
- [分布式系统模块理论关系梳理](../01-理论逻辑脉络/07-分布式系统模块理论关系梳理.md) - 分布式系统应用
- [应用领域关系图](../认知表征图谱/02-关系图文档/03-应用领域关系图.md#二分布式系统应用关系图--part-2-distributed-system-application-relationship) - 分布式系统应用场景

### 场景3：分布漂移检测（AI/数据管线）

**问题**: AI系统的数据分布可能发生漂移，需要检测分布变化和异常形状。

**建模选择**: **拓扑模型(TDA)**（关注形状/分布）

**分析方法**:

- 持久同调：提取拓扑特征（洞、循环）
- Mapper算法：高维数据可视化
- Hodge分解：流分解和异常检测

**工具链**: GUDHI/Ripser、giotto-tda、KeplerMapper

**补充分析**: Petri网验证执行路径保障

**详细示例**: 参见 [`典型场景详细示例补充.md`](../01-理论逻辑脉络/典型场景详细示例补充.md#3-分布漂移检测场景ai数据管线--distribution-drift-detection-scenario)

**相关文档**:
- [拓扑模型逻辑脉络](../01-理论逻辑脉络/03-拓扑模型逻辑脉络.md) - 深入了解拓扑模型
- [应用领域关系图](../认知表征图谱/02-关系图文档/03-应用领域关系图.md#三ai基础设施应用关系图--part-3-ai-infrastructure-application-relationship) - AI基础设施应用场景
- [理论选择因果链](../认知表征图谱/03-因果链文档/01-理论选择因果链.md) - 理论选择的因果推理
