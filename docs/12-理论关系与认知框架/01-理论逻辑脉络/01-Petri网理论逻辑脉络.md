# Petri网理论逻辑脉络 / Petri Net Theory Logic Line

## 📚 概述 / Overview

**目标**: 梳理Petri网理论的公理体系、定理链条、方法与应用，形成可对接动态图论/拓扑模型的逻辑框架。

**范围**:

- 基础结构与语义：P/T网、公理、真并发语义
- 核心性质：可达性、活性、有界性、安全性、公平性
- 不变量体系：S-不变量、T-不变量、关联矩阵、状态方程
- 分析方法：状态空间、覆盖树、展开、模型检验
- 扩展方向：着色网、时间网、随机网、混成网

**参照**:

- `View文件夹概念定义清单-2025.md`
- `View文件夹权威内容对标报告-2025.md`
- `graph_view00.md`, `graph_view01.md`

---

## 🎯 一、公理与语义基础

### 1.1 公理层

- **结构公理**：有向二分图N=(P,T,F)，P∩T=∅，F⊆(P×T)∪(T×P)
- **权重公理**：存在权重函数W: F→ℕ⁺
- **初始公理**：给定初始标识M₀: P→ℕ
- **动态公理**（点火规则）：M[t⟩M' 当且仅当 ∀p∈•t: M(p)≥W(p,t)，且 M'(p)=M(p)-W(p,t)+W(t,p)
- **真并发语义**：独立变迁可同时点火；冲突由共享库所决定

### 1.2 语义层

- **标识语义**：标识M是系统状态；Reach(N,M₀)定义可达集
- **发生序语义**：部分序（真并发）与全序（线性化）等价于Mazurkiewicz迹
- **对偶语义**：库所=资源，变迁=过程；与范畴论对象/态射对齐

---

## 🔬 二、核心性质与定理链条

### 2.1 可达性与复杂度

- **可达性问题**：EXPSPACE-完全（Mayr, 1981）
- **可达图RG**：顶点=可达标识，边=变迁点火；用于模型检验

### 2.2 活性与死锁

- **活性**：∀t∈T，存在未来标识使t可触发；活性分级L0-L4
- **死锁**：无可触发变迁的标识；可通过RG或不变式检测

### 2.3 有界性与安全性

- **有界性**：∃k, ∀p, ∀M∈Reach: M(p)≤k
- **安全性**：k=1的有界性；保证互斥资源不溢出

### 2.4 不变量与守恒律

- **S-不变量**：wᵀC=0，资源守恒；对应0阶上同调类
- **T-不变量**：Cσ=0，循环行为；对应可重复序列
- **状态方程**：M' = M + C·σ，用于线性近似分析

### 2.5 展开与真并发

- **展开(Unfolding)**：将网展开为安全的分支进程网，消除循环的二义性
- **并发检测**：独立变迁的并发通过前/后集判定（•t1∩•t2=∅ 且 t1•∩t2•=∅）

---

## 📐 三、分析方法与工具

### 3.1 状态空间方法

- **可达图 / 覆盖树**：应对有界 / 无界网
- **部分序规约**：减少状态爆炸（基于独立变迁）

### 3.2 不变式方法

- **线性代数求解**：S/T不变量、核/像空间分析
- **守恒性验证**：利用S-不变量判定资源泄漏

### 3.3 模型检验

- **CTL/LTL**：在RG上检验时序逻辑性质
- **工具链**：CPN Tools、TLA+、Spin（Promela翻译）、GreatSPN、WoPeD

### 3.4 展开与合成

- **McMillan展开**：用于真并发模型检验
- **合成**：基于区域理论从行为规范合成Petri网

---

## 🧭 四、概念演化与扩展

### 4.1 网的扩展族

- **着色网**：类型化令牌，压缩状态空间
- **时间网**：加入时间区间；可模拟实时系统
- **随机网**：变迁服从概率分布；性能/可靠性分析
- **混成网**：连续+离散混合；控制与流体近似

### 4.2 应用模式

- **工作流 / BPMN语义**：声音性、完备性、无死锁
- **并发系统**：死锁预防、资源分配
- **协议与分布式系统**：互斥、共识、恢复

---

## 🔗 五、与其他理论的映射

- **Petri网 ↔ 动态图**：标识↔快照；点火↔图重写；不变量↔谱守恒
- **Petri网 ↔ 拓扑模型**：展开=覆叠空间；S-不变量=H⁰；T-不变量对应循环同调
- **范畴论视角**：对象=P，态射=变迁；可达性函子R: PNC→Set；几何实现函子G: PNC→Top

---

## 🚀 六、产出与后续工作

### 6.1 本阶段输出

- `01-Petri网理论逻辑脉络.md`（本文）
- 待补充：`01-Petri网公理体系梳理.md`，`01-Petri网定理证明树.md`

### 6.2 后续细化

- 丰富定理证明树：可达性、活性、有界性、声音性
- 补充案例：工作流网、生产者-消费者、互斥锁、两阶段提交
- 增加工具示例：CPN Tools状态空间；TLA+/Promela对照

---

**文档版本**: v1.0
**创建时间**: 2025年1月
**最后更新**: 2025年1月
**状态**: 进行中
**维护者**: GraphNetWorkCommunicate项目组
