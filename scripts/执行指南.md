# 批量标记脚本执行指南 / Batch Marking Script Execution Guide 2025

## 📋 执行前准备

### 1. 备份文件（推荐）

在执行脚本前，建议先备份待标记的文件：

**Windows**:

```powershell
# 创建备份目录
New-Item -ItemType Directory -Path "backup-pending-files" -Force

# 备份所有待完善文件
Get-ChildItem -Path "docs" -Recurse -Filter "*-深度改进版-2025.md" -File | Copy-Item -Destination "backup-pending-files\" -Recurse
```

**Linux/Mac**:

```bash
# 创建备份目录
mkdir -p backup-pending-files

# 备份所有待完善文件
find docs -name "*-深度改进版-2025.md" -type f -exec cp --parents {} backup-pending-files/ \;
```

### 2. 检查脚本

确认脚本文件存在：

- `scripts/mark-pending-files.ps1` (Windows)
- `scripts/mark-pending-files.sh` (Linux/Mac)

## 🚀 执行步骤

### Windows环境

1. **打开PowerShell**
   - 以管理员身份运行（可选，但推荐）

2. **切换到项目目录**

   ```powershell
   cd E:\_src\GraphNetWorkCommunicate
   ```

3. **设置执行策略（如果需要）**

   ```powershell
   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
   ```

4. **执行脚本**

   ```powershell
   powershell -ExecutionPolicy Bypass -File scripts/mark-pending-files.ps1
   ```

5. **查看执行结果**
   - 脚本会输出每个已标记的文件路径
   - 最后会显示标记的文件总数

### Linux/Mac环境

1. **打开终端**

2. **切换到项目目录**

   ```bash
   cd /path/to/GraphNetWorkCommunicate
   ```

3. **添加执行权限（如果需要）**

   ```bash
   chmod +x scripts/mark-pending-files.sh
   ```

4. **执行脚本**

   ```bash
   bash scripts/mark-pending-files.sh
   ```

5. **查看执行结果**
   - 脚本会输出每个已标记的文件路径
   - 最后会显示标记的文件总数

## ✅ 验证结果

### 检查已标记文件数量

**Windows**:

```powershell
(Get-ChildItem -Path "docs" -Recurse -Filter "*-深度改进版-2025.md" -File | Select-String -Pattern "⚠️ \*\*状态\*\*: 待完善").Count
```

**Linux/Mac**:

```bash
grep -r "⚠️ \*\*状态\*\*: 待完善" docs/**/*-深度改进版-2025.md | wc -l
```

**预期结果**: 153个文件

### 检查标记格式

随机检查几个文件，确认标记格式正确：

**Windows**:

```powershell
Get-Content docs\01-图论基础\05-高级理论-动态图理论-深度改进版-2025.md | Select-Object -First 15
```

**Linux/Mac**:

```bash
head -15 docs/01-图论基础/05-高级理论-动态图理论-深度改进版-2025.md
```

**预期内容**: 应该看到待完善标记（⚠️ **状态**: 待完善）

## 🔧 故障排除

### 问题1: PowerShell执行策略限制

**错误**: "无法加载文件，因为在此系统上禁止运行脚本"

**解决方案**:

```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 问题2: 脚本找不到文件

**错误**: "找不到文件"

**解决方案**:

- 确认当前目录正确
- 确认脚本路径正确
- 使用绝对路径执行脚本

### 问题3: 标记格式不正确

**问题**: 标记添加后格式混乱

**解决方案**:

- 检查文件编码（应为UTF-8）
- 检查脚本中的换行符
- 手动检查几个文件，确认格式正确

## 📊 执行后检查清单

- [ ] 已标记文件数量 = 153个
- [ ] 标记格式正确（包含⚠️和📝图标）
- [ ] 文件内容未被破坏
- [ ] 所有待完善文件都已标记
- [ ] 已标记文件可以正常打开和阅读

## 🎯 后续步骤

标记完成后：

1. **验证标记结果**（见上方验证步骤）

2. **（可选）归档P2文件**
   - 根据优先级清单，归档23个P2低优先级文件
   - 归档位置: `archive/version-history/深度改进版-无原版/`

3. **更新文档**
   - 更新待完善文件清单，标记已标记的文件
   - 更新工作状态总览

## 📚 相关文档

- [待完善文件标记说明](../待完善文件标记说明-2025.md)
- [待完善文件处理优先级清单](../待完善文件处理优先级清单-2025.md)
- [脚本使用说明](./README.md)

---

**指南创建时间**: 2025年1月
**维护者**: GraphNetWorkCommunicate项目组
